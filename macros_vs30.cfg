[gcode_macro ETALONNAGE_USINE]
description: Etalonnage complet de la machine, Parallélisme + Surface + Chauffe tête + Chauffe lit.
rename_existing: SAVE_ETALONNAGE_USINE
gcode:
	SET_LED LED="Eclairage_LEDs" RED=1 GREEN=0.23 BLUE=0 SYNC=0 TRANSMIT=1
	M117 Homing
	G28
	M117 PARALLELISME
	QUAD_GANTRY_LEVEL
	M117 CHAUFFAGE DU LIT
	M190 S60
	M117 ETALONNAGE SURFACE
	BED_MESH_CALIBRATE PROFILE=default
	M117 PID TETE A 220°
	PID_CALIBRATE HEATER=extruder TARGET=220
	M117 PID LIT A 80°
	PID_CALIBRATE HEATER=heater_bed TARGET=80
	SAVE_CONFIG

[gcode_macro ETALONNAGE_SURFACE]
description: Etalonnage de Surface du lit.
rename_existing: SAVE_ETALONNAGE_SURFACE
gcode:
	SET_LED LED="Eclairage_LEDs" RED=1 GREEN=0.23 BLUE=0 SYNC=0 TRANSMIT=1
    RESPOND TYPE=command MSG=action:prompt_end
	G28
	{% if params.TEMPERATURE_BUSE is defined %}
		M104 T0 S{params.TEMPERATURE_BUSE|int}
	{% else %}
		M104 T0 S160
	{% endif %}
	{% if params.TEMPERATURE_LIT is defined %}
		M117 Chauffage du lit
		M190 S{params.TEMPERATURE_LIT|int}
	{% endif %}
	M400
	SET_LED LED="Eclairage_LEDs" RED=0 GREEN=0 BLUE=1 SYNC=0 TRANSMIT=1
	M117 Etalonnage parallelisme
	QUAD_GANTRY_LEVEL
	M117 Etalonnage de surface
	BED_MESH_CALIBRATE PROFILE=default
	TURN_OFF_HEATERS
	G0 Z50 F900
	M117 Etalonnage terminee
	M400
	SAVE_CONFIG

[gcode_macro ETALONNAGE_PARALLELISME]
description: Etalonnage du parallélisme des 4 axes Z.
rename_existing: SAVE_ETALONNAGE_PARALLELISME
gcode:
	SET_LED LED="Eclairage_LEDs" RED=0 GREEN=0 BLUE=1 SYNC=0 TRANSMIT=1
	M117 Etalonnage parallelisme
	G28
	QUAD_GANTRY_LEVEL
	SET_LED LED="Eclairage_LEDs" RED=0 GREEN=1 BLUE=0 SYNC=0 TRANSMIT=1
	M117 Etalonnage parallelisme terminee
